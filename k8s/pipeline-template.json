{
  "application": "uptime-status",
  "name": "Deploy Uptime App",
  "triggers": [
    {
      "enabled": true,
      "type": "webhook",
      "source": "github-actions",
      "payloadConstraints": {}
    }
  ],
  "stages": [
    {
      "type": "manualJudgment",
      "name": "Approve API to STAGING",
      "instructions": "Proceed to deploy API to staging?"
    },
    {
      "type": "webhook",
      "name": "Deploy API (STAGING)",
      "method": "POST",
      "url": "RENDER_HOOK_API_STAGING",
      "customHeaders": [
        {
          "key": "Content-Type",
          "value": "application/json"
        }
      ],
      "payload": "{}",
      "failPipeline": true
    },
    {
      "type": "webhook",
      "name": "Verify STAGING /health",
      "method": "GET",
      "url": "API_STAGING_URL/health",
      "failPipeline": true
    },
    {
      "type": "manualJudgment",
      "name": "Promote API to PROD",
      "instructions": "Promote to production?"
    },
    {
      "type": "webhook",
      "name": "Deploy API (PROD)",
      "method": "POST",
      "url": "RENDER_HOOK_API_PROD",
      "customHeaders": [
        {
          "key": "Content-Type",
          "value": "application/json"
        }
      ],
      "payload": "{}",
      "failPipeline": true
    },
    {
      "type": "webhook",
      "name": "Verify PROD /health",
      "method": "GET",
      "url": "API_PROD_URL/health",
      "failPipeline": true
    },
    {
      "type": "manualJudgment",
      "name": "Deploy WORKER",
      "instructions": "Deploy background pinger to prod?"
    },
    {
      "type": "webhook",
      "name": "Deploy WORKER (PROD)",
      "method": "POST",
      "url": "RENDER_HOOK_WORKER_PROD",
      "customHeaders": [
        {
          "key": "Content-Type",
          "value": "application/json"
        }
      ],
      "payload": "{}",
      "failPipeline": true
    },
    {
      "type": "manualJudgment",
      "name": "Deploy WEB",
      "instructions": "Deploy static dashboard?"
    },
    {
      "type": "webhook",
      "name": "Deploy WEB (PROD)",
      "method": "POST",
      "url": "RENDER_HOOK_WEB_PROD",
      "customHeaders": [
        {
          "key": "Content-Type",
          "value": "application/json"
        }
      ],
      "payload": "{}",
      "failPipeline": true
    }
  ]
}